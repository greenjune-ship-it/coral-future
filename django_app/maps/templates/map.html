{% extends 'base.html' %}

{% block content %}
    <div id="map-container" style="height: 80vh; width: 80%; margin: 5% auto;">
    </div>

    <!-- Include jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

    <!-- Include Bootstrap JavaScript (make sure jQuery is included before this) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Include Leaflet CSS and JavaScript -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

    <script>
        // Use a more unique ID for the map container
        var map = L.map('map-container').setView([{{ locations.first.latitude }}, {{ locations.first.longitude }}], 10);

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; OpenStreetMap contributors'
        }).addTo(map);

        {% for location in locations %}
            L.marker([{{ location.latitude }}, {{ location.longitude }}]).addTo(map)
                .bindPopup("{{ location.name }}");
        {% endfor %}
    </script>
{% endblock %}
