{% extends 'base.html' %}

{% block content %}
{% include 'navbar.html' %}

<div id="map-container" style="height: 80vh; width: 80%; margin: auto;"></div>

<!-- Include jQuery -->
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

<!-- Include Bootstrap JavaScript (make sure jQuery is included before this) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>

<!-- Include Leaflet CSS and JavaScript -->
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<script>
    // Use a more unique ID for the map container
    var map = L.map('map-container').setView([{{ samples.first.latitude }}, {{ samples.first.longitude }}], 10);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    {% for sample in samples %}
        var marker = L.marker([{{ sample.latitude }}, {{ sample.longitude }}]).addTo(map);
        marker.bindPopup("Project ID: {{ sample.project_id }}<br>Sample ID: {{ sample.id }}<br>Coordinates: {{ sample.latitude }}, {{ sample.longitude }}");
    {% endfor %}
</script>

{% endblock %}
